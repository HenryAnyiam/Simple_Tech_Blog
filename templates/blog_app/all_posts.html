{% extends 'blog_app/base_file.html' %}

{% block active_articles%}active{% endblock %}

{% block body %}
    <form method="POST">
        {% csrf_token %}

        <select name="order_by" id="order_by">
            <option disabled selected>Sort by</option>
            <option value="publish_date">Date Published</option>
            <option value="views">Most Viewed</option>
            <option value="comments" >Mose Comments</option>
            <option value="likes">Most Liked</option>
        </select>
        <select name="order" id="order">
            <option disabled selected>Order</option>
            <option value="ascending">Ascending</option>
            <option value="descending">Descending</option>
        </select>
        <input list="authors_list" name="author" placeholder="Get specific author">
        <datalist id="authors_list">
            {% for user in users %}
                <option>{{ user }}</option>
            {% endfor %}
        </datalist>
        <input type="hidden" value="{{ sort }}" name="sort">

        <input type="submit" class="btn btn-outline-primary btn-sm" value="Sort">
    </form>

    {% if error %}
        <p>{{ error }}</p>
    {% endif %}
    {% if articles %}
    <div>
        <ul>
            {% for article in articles %}
            <li>
                <div id="article">
                    <h2>{{ article.title }}</h2>
                    <p>{{ article.summary|safe|linebreaksbr }}...</p>
                    <a href="{% url 'blog_app:view_article' article.id %}">Read More</a>
                </div>
            </li>
            {% endfor %}
        </ul>
        <div id="paginate" style="display: flex; justify-content: space-between;">
            {% if prev %}
            <form method="POST">
                {% csrf_token %}
                <input type="hidden" value="{{ prev }}" name="prev">
                <input type="hidden" value="{{ sort }}" name="sort">
                <input type="submit" class="btn btn-outline-primary btn-sm" value="prev">
            </form>
            {% endif %}
            {% if next %}
            <form method="POST">
                {% csrf_token %}
                <input type="hidden" value="{{ next }}" name="next">
                <input type="hidden" value="{{ sort }}" name="sort">
                <input type="submit" class="btn btn-outline-primary btn-sm" value="next">
            </form>
            {% endif %}
        </div>
    </div>
        
    {% endif %}
{% endblock %}